generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id          String   @id @default(cuid())
  first_name  String
  last_name   String
  email       String   @unique
  subscribed  Boolean  @default(false)
  courses     Course[]
  
  @@map("users")
}

model Course {
  id      String  @id @default(cuid())
  title   String
  completed Boolean @default(false)
  user_id String
  user    User    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  units   Unit[]

  @@map("courses")
}

model Unit {
  id          String    @id @default(cuid())
  title       String
  completed   Boolean   @default(false)
  unit_number String
  course_id   String
  course      Course    @relation(fields: [course_id], references: [id], onDelete: Cascade)
  chapters    Chapter[]

  @@map("units")
}

model Chapter {
  id                         String @id @default(cuid())
  title                      String
  chapter_number            String
  completed                 Boolean @default(false)
  unit_id                   String
  youtube_video_id          String
  youtube_video_search_query String
  summary                   String
  unit                      Unit   @relation(fields: [unit_id], references: [id], onDelete: Cascade)
  quizzes                   Quiz[]

  @@map("chapters")
}

model Quiz {
  id         String   @id @default(cuid())
  status     String
  completed  Boolean  @default(false)
  question   String
  answer     String
  options    String[] 
  chapter_id String
  chapter    Chapter  @relation(fields: [chapter_id], references: [id], onDelete: Cascade)

  @@map("quizzes")
}